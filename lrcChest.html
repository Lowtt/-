<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>lrctest</title>
        <script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
        <!-- <script src="js/lrctest.js" type="text/javascript"></script> -->
    </head>
    <body>
            <audio src="https://api.bzqll.com/music/tencent/url?key=579621905&id=000Qepff3UyUWO&br=192" controls="controls" autoplay="autoplay">
                抱歉你的浏览器版本out了，去升级吧
            </audio>
        <div id="lyric"></div>
    </body>
    <script>
            $(document).ready(function () {
    var lrc = ["[ti:天份]", "[ar:薛之谦]", "[al:天份]", "[by:]","[offset:0]", "[00:00.43]天份 - 薛之谦", "[00:00.59]词：薛之谦", "[00:00.72]曲：薛之谦", "[00:19.21]用怀念的方式", "[00:23.75]在一起的样子", "[00:27.21]距离一尺", "[00:29.47]秋叶不止", "[00:31.63]确认一次", "[00:37.42]用投入的方式", "[00:41.91]你离开的样子", "[00:45.18]松开手指", "[00:47.59]欲言又止", "[00:49.83]确认了几次", "[00:55.19]所以爱过的人", "[00:57.22]倾诉给麻木的城市", "[01:04.66]在夜里疼痛时抚平你的幼稚", "[01:13.31]可是谁没有一次", "[01:15.79]不顾一切的坚持", "[01:22.39]话要适可而止", "[01:27.28]挽留的举止", "[01:31.61]我有点疼但是我还能忍", "[01:35.80]是不是爱你我算还有点天份", "[01:40.35]可能我太认真", "[01:43.17]你已经不算坏人", "[01:49.47]我有点疼但是我还能忍", "[01:54.04]是不是习惯了", "[01:55.80]能换一点缘份", "[01:58.65]让沉默的秒针", "[02:01.37]代替我的疑问", "[02:21.74]所以爱过的人", "[02:23.60]倾诉给麻木的城市", "[02:30.98]在夜里疼痛时抚平你的幼稚", "[02:39.85]可是谁没有几次", "[02:42.01]不顾一切的争执", "[02:48.57]要学会点到为止", "[02:53.12]直到分开为止", "[02:57.80]我有点疼但是我还能忍", "[03:02.18]是不是爱你我算还有点天份", "[03:06.71]可能我太认真", "[03:09.53]你已经不算坏人", "[03:15.78]我有点疼但是我还能忍", "[03:20.32]是不是习惯了", "[03:22.05]能换一点缘份", "[03:24.96]让沉默的秒针", "[03:27.74]代替我的疑问", "[03:33.08]制作人：薛之谦", "[03:33.74]编曲：郑伟", "[03:33.87]合音：薛之谦", "[03:34.04]混音：郑伟", "[03:34.17]人声录制：严若晨", "[03:34.40]录音棚：黄轲（东华大学声音工作室）"]; //创建歌词数组;
    // // lrc.push("[00:00.805]陈一发儿 - 童话镇");
    // lrc.push("[00:10.000]作曲 : 暗杠 作词 : 竹君");
    // lrc.push("[00:15.000]编曲 : 暗杠");
    // // lrc.push("[00:23.076]听说白雪公主在逃跑");
    // lrc.push("[00:26.466]小红帽在担心大灰狼");
    // //...中间省略N行...
    // lrc.push("[03:22.746]又陌生");
    // lrc.push("[03:24.488]啊~~啊~~啊~");
    // lrc.push("[10:00.000]完～");

    var myAudio = $("audio")[0];
    var lrcArr = [];
    getLrc();

    function getLrc() {
        var timeReg = /\[\d{2}:\d{2}\.\d{2,}\]/g;//匹配时间的正则表达式
        // var lrcArr = [];
        for (var i=4;i<lrc.length;i++) {
            var time = lrc[i].match(timeReg); //获取歌词里的时间
            var value = lrc[i].replace(timeReg, ""); //获取纯歌词文本
            for (var j=0;j<time.length;j++ ) {
                var t = time[j].slice(1, -1).split(":"); //t[0]分钟，t[1]秒
                var timeArr = parseInt(t[0], 10) * 60 + parseFloat(t[1]);
                lrcArr.push([timeArr, value]);//以[时间(秒)，歌词]的形式存进result
            }
        }
        // lrcArr = result;//这个有点多余。。。
        setInterval(showLrc, 200);//设置定时，每200毫秒更新一下
    }
    function showLrc(){
        var curTime = myAudio.currentTime;//获取当前的播放时间
        for (var i = 0; i < lrcArr.length; i++) {
            if ((curTime >lrcArr[i][0])&&(curTime<lrcArr[i+1][0])) {
                 //播放时间大于对应歌词时间小于下一句歌词时间就显示当前歌词
                document.getElementById("lyric").innerHTML = lrcArr[i][1];
                break;//找到对应歌词就停，不停的话，呵呵。。。
            }
        }
    }
})
    </script>
</html>
